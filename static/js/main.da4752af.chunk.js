(this.webpackJsonplouvre=this.webpackJsonplouvre||[]).push([[0],{220:function(e,t,n){},408:function(e,t,n){"use strict";n.r(t);var r=n(12),c=n(19),s=n(1),a=n(2),i=n.n(a),o=n(92),l=n.n(o),u=(n(220),n(10)),d=n(8),j=n(7);var h=Object(j.b)((function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}}))((function(e){var t=e.profile,n=e.auth;return n.uid?Object(s.jsx)("div",{className:"container",children:Object(s.jsxs)("div",{className:"card hogBlock profileCard louvColor",children:[Object(s.jsx)("div",{className:"card-image",children:Object(s.jsx)("img",{src:t.img,alt:"userImg",className:"responsive-img"})}),Object(s.jsxs)("div",{className:"card-content",children:[Object(s.jsx)("h1",{children:t.userName}),Object(s.jsxs)("p",{children:["e-mail: ",n.email]}),Object(s.jsxs)("p",{children:["role: ","neo"===t.role?Object(s.jsx)("h5",{className:"green-text",children:"neo"}):t.role]})]})]})}):Object(s.jsx)(d.a,{to:"/signin"})})),b=n(15),p=n(16),O=n(18),m=n(17),f=function(e){Object(O.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(b.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={email:"",password:""},e.handleChange=function(t){e.setState(Object(c.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signIn(e.state)},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.authError;return e.auth.uid?Object(s.jsx)(d.a,{to:"/"}):Object(s.jsx)("div",{className:"container louvColor",children:Object(s.jsxs)("form",{onSubmit:this.handleSubmit,className:"white ",children:[Object(s.jsx)("h5",{className:"grey-text text-darken-3",children:"Sign In"}),Object(s.jsxs)("div",{className:"input-field",children:[Object(s.jsx)("label",{htmlFor:"email",children:"Email"}),Object(s.jsx)("input",{type:"email",id:"email",onChange:this.handleChange})]}),Object(s.jsxs)("div",{className:"input-field",children:[Object(s.jsx)("label",{htmlFor:"password",children:"Password"}),Object(s.jsx)("input",{type:"password",id:"password",onChange:this.handleChange})]}),Object(s.jsxs)("div",{className:"input-field",children:[Object(s.jsx)("button",{className:"btn z-depth-0",children:"Log in"}),Object(s.jsx)("div",{className:"red-text center",children:t?Object(s.jsx)("p",{children:t}):null})]})]})})}}]),n}(a.Component),x=Object(j.b)((function(e){return{authError:e.auth.authError,auth:e.firebase.auth}}),(function(e){return{signIn:function(t){return e((n=t,function(e,t,r){(0,r.getFirebase)().auth().signInWithEmailAndPassword(n.email,n.password).then((function(){e({type:"LOGIN_SUCCESS"})})).catch((function(t){e({type:"LOGIN_ERROR",err:t})}))}));var n}}}))(f),g=function(e){Object(O.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(b.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={email:"",password:"",userName:"",img:""},e.handleChange=function(t){e.setState(Object(c.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signUp(e.state)},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.auth,n=e.authError;return t.uid?Object(s.jsx)(d.a,{to:"/"}):Object(s.jsx)("div",{className:"container",children:Object(s.jsxs)("form",{onSubmit:this.handleSubmit,className:"white",children:[Object(s.jsx)("h5",{children:"New Inhabitant"}),Object(s.jsxs)("div",{className:"input-field",children:[Object(s.jsx)("label",{htmlFor:"userName",children:"User name"}),Object(s.jsx)("input",{type:"text",id:"userName",onChange:this.handleChange})]}),Object(s.jsxs)("div",{className:"input-field",children:[Object(s.jsx)("label",{htmlFor:"email",children:"Email"}),Object(s.jsx)("input",{type:"email",id:"email",onChange:this.handleChange})]}),Object(s.jsxs)("div",{className:"input-field",children:[Object(s.jsx)("label",{htmlFor:"password",children:"Password"}),Object(s.jsx)("input",{type:"password",id:"password",onChange:this.handleChange})]}),Object(s.jsxs)("div",{className:"input-field",children:[Object(s.jsx)("label",{htmlFor:"img",children:"Link to image for profile picture"}),Object(s.jsx)("input",{type:"text",id:"img",onChange:this.handleChange})]}),Object(s.jsxs)("div",{className:"input-field",children:[Object(s.jsx)("button",{className:"btn z-depth-0",children:"Sign Up"}),Object(s.jsx)("div",{className:"red-text center z-depth-1 p1",children:n?Object(s.jsx)("p",{children:n}):null})]})]})})}}]),n}(a.Component),v=Object(j.b)((function(e){return{auth:e.firebase.auth,authError:e.auth.authError}}),(function(e){return{signUp:function(t){return e(function(e){return function(t,n,r){var c=r.getFirebase,s=r.getFirestore,a=c(),i=s();a.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(t){return i.collection("users").doc(t.user.uid).set({userName:e.userName,img:e.img,role:"guest"})})).then((function(){t({type:"SIGNUP_SUCCESS"})})).catch((function(e){t({type:"SIGNUP_ERROR",err:e})}))}}(t))}}}))(g),N=function(){return Object(s.jsx)("header",{className:"mainHeader",children:Object(s.jsxs)("div",{className:"louvFont",children:[Object(s.jsx)("h1",{children:" Welcome to Louvre"}),Object(s.jsx)("h5",{children:" Watch. Read. Share."})]})})},C=function(){return Object(s.jsx)("footer",{class:"footerMain louvColor ",children:Object(s.jsx)("div",{class:"footerContent",children:Object(s.jsx)("div",{children:"\xa9 2020 bixxter"})})})},E=Object(j.b)((function(e){return{profile:e.firebase.profile,auth:e.firebase.auth}}),(function(e){return{signOut:function(){return e((function(e,t,n){(0,n.getFirebase)().auth().signOut().then((function(){e({type:"SIGNOUT_SUCCESS"})}))}))}}}))((function(e){var t=e.profile,n=e.auth,r="neo"===t.role?Object(s.jsx)(u.c,{to:"/create",children:"Create opinion"}):null;return n.uid?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("li",{children:r}),Object(s.jsx)("li",{children:Object(s.jsx)(u.c,{to:"/userprofile",children:t.userName})}),Object(s.jsx)("li",{children:Object(s.jsx)("a",{onClick:e.signOut,children:"Log Out"})})]}):Object(s.jsx)(d.a,{to:"/signin"})})),S=function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("li",{children:Object(s.jsx)(u.c,{to:"/signup",children:"Sign Up"})}),Object(s.jsx)("li",{children:Object(s.jsx)(u.c,{to:"/signin",children:"Login"})})]})},y=Object(j.b)((function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}}))((function(e){var t=e.auth,n=e.profile,r=t.uid?Object(s.jsx)(E,{profile:n}):Object(s.jsx)(S,{});return Object(s.jsx)("nav",{className:"nav-wrapper louvColor navBar",children:Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)(u.b,{to:"/",className:"brand-logo louvFont",children:"Louvre"}),Object(s.jsx)("ul",{className:"right",children:r})]})})})),k=n(139),R=n.n(k),F=function(e){Object(O.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(b.a)(this,n);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={id:e.props.post.id},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.post;return Object(s.jsx)("div",{className:"post",children:Object(s.jsxs)("div",{className:"card z-depth-1 louvColor",children:[Object(s.jsx)("div",{className:"card-image postImage",children:Object(s.jsx)("img",{src:e.img,alt:""})}),Object(s.jsx)("div",{className:"card-content postContent",children:Object(s.jsx)("span",{className:"card-title postTitle",children:e.title})})]})})}}]),n}(a.Component),I=Object(j.b)((function(e){return{profile:e.firebase.profile}}))((function(e,t){var n=e.posts,r=t.profile;return Object(s.jsx)("div",{className:"gallery",children:Object(s.jsx)("div",{className:"section posts container",children:n&&n.map((function(e){return Object(s.jsx)(u.b,{to:"/post/"+e.id,children:Object(s.jsx)(F,{post:e,profile:r})},e.id)}))})})})),_=n(32),T=n(25),w=function(e){Object(O.a)(n,e);var t=Object(m.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.posts;return e.auth.uid?Object(s.jsx)("div",{children:Object(s.jsx)(I,{posts:t})}):Object(s.jsx)(d.a,{to:"signin"})}}]),n}(a.Component),L=Object(T.d)(Object(j.b)((function(e){return{posts:e.firestore.ordered.posts,auth:e.firebase.auth}})),Object(_.firestoreConnect)([{collection:"posts"}]))(w),U=function(e){Object(O.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(b.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={title:"",content:"",img:""},e.handleChange=function(t){e.setState(Object(c.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.createPost(e.state),e.props.history.push("/")},e}return Object(p.a)(n,[{key:"render",value:function(){return this.props.auth.uid?Object(s.jsx)("div",{className:"container",children:Object(s.jsxs)("form",{onSubmit:this.handleSubmit,className:"white",children:[Object(s.jsx)("h5",{className:"grey-text text-darken-3",children:"Create new opinion"}),Object(s.jsxs)("div",{className:"input-field",children:[Object(s.jsx)("label",{htmlFor:"title",children:"Title"}),Object(s.jsx)("input",{type:"text",id:"title",onChange:this.handleChange})]}),Object(s.jsxs)("div",{className:"input-field",children:[Object(s.jsx)("label",{htmlFor:"content",children:"Content"}),Object(s.jsx)("textarea",{id:"content",className:"materialize-textarea",onChange:this.handleChange})]}),Object(s.jsxs)("div",{className:"input-field",children:[Object(s.jsx)("label",{htmlFor:"img",children:"Image"}),Object(s.jsx)("input",{type:"text",id:"img",onChange:this.handleChange})]}),Object(s.jsx)("div",{className:"input-field",children:Object(s.jsx)("button",{className:"btn pink lighten-1 z-depth-0",children:"Create"})})]})}):Object(s.jsx)(d.a,{to:"signin"})}}]),n}(a.Component),P=Object(j.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{createPost:function(t){return e(function(e){return function(t,n,c){var s=(0,c.getFirestore)(),a=n().firebase.profile,i=n().firebase.auth.uid;s.collection("posts").add(Object(r.a)(Object(r.a)({},e),{},{authorUserName:a.userName,authorId:i,createdAt:new Date,likes:0,comments:[]})).then((function(){t({type:"CREATE_POST_SUCCESS",post:e})})).catch((function(e){t({type:"CREATE_POST_ERROR",err:e})}))}}(t))}}}))(U),D=function(e){Object(O.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(b.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={postId:e.props.postId,userId:e.props.auth.uid,userName:e.props.profile.userName,userImg:e.props.profile.img,comment:""},e.handleChange=function(t){e.setState(Object(c.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),console.log(e.state),e.props.leaveComment(e.state)},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.post,r=t.auth,c=t.profile;return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"input-field",children:Object(s.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(s.jsx)("label",{htmlFor:"comment",children:"Comment"}),Object(s.jsx)("textarea",{id:"comment",className:"materialize-textarea",onChange:this.handleChange}),Object(s.jsx)("button",{type:"submit",className:"btn z-depth-0 ",children:"Leave a comment"})]})}),Object(s.jsx)("div",{className:"comments",children:n.comments&&n.comments.map((function(t,n){return Object(s.jsxs)("div",{className:"commentBlock z-depth-1",children:[Object(s.jsx)("div",{className:"commentImg",children:Object(s.jsx)("img",{src:t.userImg,alt:"userImg",className:"circle responsive-img"})}),Object(s.jsxs)("div",{className:"commentContent",children:[Object(s.jsx)("span",{className:"card-title",children:t.userName}),Object(s.jsx)("p",{children:t.comment})]}),Object(s.jsx)("div",{className:"deleteComment",children:r.uid===t.userId||"neo"===c.role?Object(s.jsx)("button",{className:"btn z-depth-0 red",onClick:function(n){n.preventDefault(),e.props.deleteComment(t)},children:Object(s.jsx)("i",{className:"material-icons",children:"clear"})}):null})]},n)}))})]})}}]),n}(a.Component),M=Object(j.b)((function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}}),(function(e){return{leaveComment:function(t){return e(function(e){return function(t,n,r){var c=r.getFirestore,s=r.getFirebase,a=c(),i=s();console.log(e),a.collection("posts").doc(e.postId).update({comments:i.firestore.FieldValue.arrayUnion(e)}).then((function(){t({type:"COMMENT_SUCCESS",comment:e})})).catch((function(e){t({type:"COMMENT_ERROR",err:e})}))}}(t))},deleteComment:function(t){return e(function(e){return function(t,n,r){var c=r.getFirestore,s=r.getFirebase,a=c(),i=s();console.log(e),a.collection("posts").doc(e.postId).update({comments:i.firestore.FieldValue.arrayRemove(e)}).then((function(){t({type:"DELETE_COMMENT_SUCCESS",comment:e})})).catch((function(e){t({type:"DELETE_COMMENT_ERROR",err:e})}))}}(t))}}}))(D),A=function(e){Object(O.a)(n,e);var t=Object(m.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.post,r=t.auth,c=t.postId,a=t.profile;return r.uid?n?Object(s.jsx)("div",{className:"container section",children:Object(s.jsx)("div",{className:"card z-depth-0",children:Object(s.jsxs)("div",{className:"card-content",children:[Object(s.jsxs)("div",{className:"postTitle",children:[Object(s.jsx)("span",{className:"card-title",children:n.title}),"neo"===a.role?Object(s.jsx)("div",{className:"delPost",children:Object(s.jsx)("button",{className:"btn z-depth-0 red",onClick:function(t){t.preventDefault(),e.props.deletePost(c),e.props.history.push("/")},children:Object(s.jsx)("i",{className:"material-icons",children:"clear"})})}):null]}),Object(s.jsx)("div",{dangerouslySetInnerHTML:{__html:n.content}}),Object(s.jsx)("div",{className:"like",children:Object(s.jsxs)("button",{className:"waves-effect waves-light btn black pulse",onClick:function(t){t.preventDefault(),e.props.likePost(c)},children:[Object(s.jsx)("i",{class:"material-icons white-text",children:"flash_on"}),n.likes]})}),Object(s.jsxs)("div",{className:"card-action grey lighten-4 grey-text",children:[Object(s.jsxs)("div",{children:["Posted by: ",n.authorUserName]}),Object(s.jsx)("div",{children:R()(n.createdAt.toDate()).calendar()})]}),Object(s.jsx)("div",{className:"comments",children:Object(s.jsx)(M,{post:n,postId:c})})]})})}):Object(s.jsx)("div",{className:"container center",children:Object(s.jsx)("p",{children:"Loading post"})}):Object(s.jsx)(d.a,{to:"signin"})}}]),n}(a.Component),z=Object(T.d)(Object(j.b)((function(e,t){var n=t.match.params.id,r=e.firestore.data.posts;return{post:r?r[n]:null,auth:e.firebase.auth,profile:e.firebase.profile,users:e.firestore.data.users,postId:n}}),(function(e){return{likePost:function(t){return e(function(e){return function(t,n,r){var c=r.getFirestore,s=r.getFirebase,a=c(),i=s();a.collection("posts").doc(e).update({likes:i.firestore.FieldValue.increment(1)}).then((function(){t({type:"LIKE_SUCCESS",postToLike:e})})).catch((function(e){t({type:"LIKE_ERROR",err:e})}))}}(t))},deletePost:function(t){return e(function(e){return function(t,n,r){var c=r.getFirestore,s=r.getFirebase,a=c();s(),a.collection("posts").doc(e).delete().then((function(){t({type:"DELETE_POST_SUCCESS",post:e})})).catch((function(e){t({type:"DELETE_POST_ERROR",err:e})}))}}(t))}}})),Object(_.firestoreConnect)([{collection:"posts"},{collection:"users"}]))(A);var G=function(){return Object(s.jsx)(u.a,{children:Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(N,{}),Object(s.jsx)(y,{}),Object(s.jsx)("main",{children:Object(s.jsxs)(d.d,{children:[Object(s.jsx)(d.b,{exact:!0,path:"/",component:L}),Object(s.jsx)(d.b,{path:"/post/:id",component:z}),Object(s.jsx)(d.b,{path:"/signin",component:x}),Object(s.jsx)(d.b,{path:"/signup",component:v}),Object(s.jsx)(d.b,{path:"/create",component:P}),Object(s.jsx)(d.b,{path:"/userprofile",component:h})]})}),Object(s.jsx)(C,{})]})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,409)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))},K={authError:null},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return console.log("fail"),Object(r.a)(Object(r.a)({},e),{},{authError:"Login failed"});case"LOGIN_SUCCESS":return console.log("success"),Object(r.a)(Object(r.a)({},e),{},{authError:null});case"SIGNOUT_SUCCESS":return console.log("signout succes"),e;case"SIGNUP_ERROR":return console.log("signup success"),Object(r.a)(Object(r.a)({},e),{},{authError:null});case"SIGNUP_ERROR":return console.log("signup fail"),Object(r.a)(Object(r.a)({},e),{},{authError:t.err.message});default:return e}},V={post:[{id:1,title:"lol kek",content:"cheburek rek rek erk"},{id:2,title:"lol kek",content:"cheburek rek rek erk"},{id:3,title:"lol kek",content:"cheburek rek rek erk"}]},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_POST_SUCCESS":return console.log("created post",t.post),e;case"CREATE_POST_ERROR":return console.log("create post error",t.err),e;case"DELETE_POST_SUCCESS":return console.log("created post",t.post),e;case"DELETE_POST_ERROR":return console.log("create post error",t.err),e;case"LIKE_SUCCESS":return console.log("liked post",t.postToLike),e;case"LIKE_ERROR":return console.log("like error",t.err),e;case"COMMENT_SUCCESS":return console.log("commented post",t.comment),e;case"COMMENT_ERROR":return console.log("commented error",t.err),e;case"DELETE_COMMENT_SUCCESS":return console.log("deleted post comment",t.comment),e;case"DELETE_COMMENT_ERROR":return console.log("deleted post comment error",t.err),e;default:return e}},J=n(54),Q=Object(T.c)({auth:W,post:H,firestore:J.firestoreReducer,firebase:_.firebaseReducer}),q=n(214),Y=n(67);n(404),n(406);Y.a.initializeApp({apiKey:"AIzaSyCd0Q4ezDFxqsuWg997QfNo-dkdTSfpLwY",authDomain:"belekcheck.firebaseapp.com",projectId:"belekcheck",storageBucket:"belekcheck.appspot.com",messagingSenderId:"804974182946",appId:"1:804974182946:web:ed81b672aebef07567807b"});var X,Z=Y.a,$=Object(T.e)(Q,Object(T.d)(Object(T.a)(q.a.withExtraArgument({getFirestore:J.getFirestore,getFirebase:_.getFirebase})),Object(J.reduxFirestore)(Z))),ee=(X={firebase:Y.a,config:Z},Object(c.a)(X,"config",{userProfile:"users",useFirestoreForProfile:!0}),Object(c.a)(X,"dispatch",$.dispatch),Object(c.a)(X,"createFirestoreInstance",J.createFirestoreInstance),X);function te(e){var t=e.children,n=Object(j.c)((function(e){return e.firebase.auth}));return Object(_.isLoaded)(n)?t:Object(s.jsx)("div",{className:"progress centr2",children:Object(s.jsx)("div",{className:"indeterminate"})})}l.a.render(Object(s.jsx)(i.a.StrictMode,{children:Object(s.jsx)(j.a,{store:$,children:Object(s.jsx)(_.ReactReduxFirebaseProvider,Object(r.a)(Object(r.a)({},ee),{},{children:Object(s.jsx)(te,{children:Object(s.jsx)(G,{})})}))})}),document.getElementById("root")),B()}},[[408,1,2]]]);
//# sourceMappingURL=main.da4752af.chunk.js.map